<div>
  <mat-card class="mat-elevation-z2">
    <mat-card-header>
      <div mat-card-avatar class="header-image" style="background-image: url('Policy/assets/images/health.png');">
      </div> <!-- to do dynamic -->
      <mat-card-title>{{_verticalName}} Policy</mat-card-title> <!-- to do dynamic -->
      <mat-card-subtitle>Insurance</mat-card-subtitle>
      <mat-card-subtitle>{{_headerTitle}}</mat-card-subtitle>
    </mat-card-header>
    <hr class="hrClass" />
    <mat-card-content>

      <mat-card class="mat-elevation-z2" style="margin-left:0px; margin-right: 0px;">
        <mat-card-content>
          <div class="row">
            <div class="col-lg-12">
              <h4>Policy Status</h4>
            </div>
          </div>
          <hr class="hrClass" />
          <div class="row">
            <div class="col-lg-4">
              <mat-list>
                <mat-list-item>
                  <div mat-line>Control Number</div>
                  <div mat-line> {{_controlNumber}}</div>
                </mat-list-item>
                <hr class="hrClass" />
                <mat-list-item>
                  <div mat-line>Previous Control Number</div>
                  <div mat-line> {{_previousControlNumber}} </div>
                </mat-list-item>
              </mat-list>
            </div>
            <div class="col-lg-4">
              <mat-list>
                <mat-list-item *ngIf="_policyType != SearchPolicyType.Motor_Renew">
                  <div mat-line>Vertical</div>
                  <div mat-line>
                    <button mat-flat-button color="primary" [ngStyle]="{'background-color':  '#fdcb6e'}">
                      {{_verticalName}}
                    </button>
                  </div>
                </mat-list-item>
                <hr class="hrClass" />
                <mat-list-item>
                  <div mat-line>Status</div>
                  <div mat-line> <button mat-flat-button color="primary"
                      [ngStyle]="{'background-color':  _policyStatusColor}">
                      {{_policyStatus}}
                    </button>
                  </div>
                </mat-list-item>
              </mat-list>
            </div>
            <div class="col-lg-4">
              <mat-list>
                <mat-list-item>
                  <div mat-line>Renewal Counter</div>
                  <div mat-line> {{_renewalCounter}} </div>
                </mat-list-item>
                <hr class="hrClass" />
                <mat-list-item>
                  <div mat-line
                    *ngIf="_policyTypes !== SearchPolicyType.Motor_Renew || _policyTypes == SearchPolicyType.Motor_Verify">
                    <button mat-flat-button color="primary"
                      [ngStyle]="{'background-color': _policyData != undefined ? _policyData.DataEntryStatusColor :'#ffffff'}">
                      {{(_policyData != undefined ? _policyData.DataEntryStatus :"")}}
                    </button>
                  </div>
                </mat-list-item>
              </mat-list>
            </div>
          </div>

          <hr />
          <div class="row">
            <div class="col-lg-4">
              <button mat-flat-button color="primary"
                [ngStyle]="{'background-color':_policyData != undefined ? _policyData.PolicyCancelReasonColor :'#ffffff'}">
                {{(_policyData != undefined ? _policyData.PolicyCancelReason :"")}}
              </button>
            </div>
            <div class="col-lg-4">
              <button mat-flat-button color="primary"
                [ngStyle]="{'background-color':_policyData != undefined ? _policyData.ReconStatusColor :'#ffffff'}">
                {{(_policyData != undefined ? _policyData.ReconStatus :"")}}
              </button>
            </div>
            <div class="col-lg-4">
              <button mat-flat-button color="primary"
                [ngStyle]="{'background-color':_policyData != undefined ? _policyData.CommissionStatusColor :'#ffffff'}">
                {{(_policyData != undefined ? _policyData.CommissionStatus :"")}}
              </button>
            </div>
          </div>
          <div class="row" *ngIf="_showErrors">
            <div class="col-lg-2" *ngFor="let error of errorList; let last=last;" style="color:red;font-size:small">
              <br />

              {{error}}
            </div>

          </div>
        </mat-card-content>

      </mat-card>

      <mat-accordion>
        <!--Start Customer Details-->
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Customer Details
            </mat-panel-title>
            <div class="col-lg-2">
              <button mat-raised-button style="background-color: #28a745;" color="primary" (click)="searchCustomer()">
                <mat-icon>search</mat-icon> Search
              </button>
            </div>
          </mat-expansion-panel-header>
          <form [formGroup]="customerForm" autocomplete="off" [ngClass]="{disabledDiv: _isViewPolicyActive}">
            <hr style="margin-top: 0px;" />
            <input type="hidden" formControlName="customerId" />
            <div class="row">
              <div class="col-lg-4" *ngIf="MenuVertical=='Motor'">
                <mat-form-field>
                  <mat-label>Name in Policy <span style="color:red">*</span></mat-label>
                  <input type="text" matInput formControlName="nameInPolicy" [errorStateMatcher]="matcher"
                    placeholder="Name in Policy" class="uppercase" [readonly]="true">
                  <mat-error *ngIf="customerForm.controls.nameInPolicy">
                    Name in Policy is <strong>required</strong>
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-lg-4" *ngIf="MenuVertical!='Motor'">
                <mat-form-field>
                  <mat-label>Proposer Name <span style="color:red">*</span></mat-label>
                  <input type="text" matInput formControlName="nameInPolicy" [errorStateMatcher]="matcher"
                    placeholder="Proposer Name" class="uppercase">
                  <mat-error *ngIf="customerForm.controls.nameInPolicy">
                    Proposer Name is <strong>required</strong>
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-lg-8">
                <mat-form-field>
                  <mat-label>Address in Policy</mat-label>
                  <input matInput formControlName="addressInPolicy" placeholder="Address in Policy" class="uppercase" />
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-4">
                <mat-form-field>
                  <mat-label>Customer Code</mat-label>
                  <input type="text" matInput formControlName="customerCode" placeholder="Customer Code"
                    [readonly]="true">
                </mat-form-field>
              </div>
              <div class="col-lg-4">
                <mat-form-field>
                  <mat-label>Cluster Code</mat-label>
                  <input type="text" matInput formControlName="clusterCode" placeholder="Cluster Code"
                    [readonly]="true">
                </mat-form-field>
              </div>
              <div class="col-lg-4">
                <mat-form-field>
                  <mat-label>Email</mat-label>
                  <input type="email" matInput formControlName="email" [errorStateMatcher]="matcher" [readonly]="true">
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-4">
                <mat-form-field>
                  <mat-label>Cluster</mat-label>
                  <input type="text" matInput formControlName="cluster" placeholder="Cluster" [readonly]="true">
                </mat-form-field>
              </div>
              <div class="col-lg-4">
                <mat-form-field>
                  <mat-label>Customer Type</mat-label>
                  <input type="text" matInput formControlName="customerType" placeholder="Customer Type"
                    [readonly]="true">
                </mat-form-field>
              </div>
              <div class="col-lg-4">
                <mat-form-field>
                  <mat-label>Contact Person</mat-label>
                  <input type="text" matInput formControlName="contactPerson" placeholder="Contact Person"
                    [readonly]="true">
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-4">
                <mat-form-field>
                  <mat-label>Contact Number</mat-label>
                  <input type="text" matInput formControlName="contactNumber" placeholder="Contact Number"
                    [readonly]="true">
                </mat-form-field>
              </div>
              <div class="col-lg-4">
                <mat-form-field>
                  <mat-label>PAN</mat-label>
                  <input type="text" matInput formControlName="pan" placeholder="PAN" [readonly]="true">
                </mat-form-field>
              </div>
              <div class="col-lg-4">
                <mat-form-field>
                  <mat-label>GSTIN</mat-label>
                  <input type="text" matInput formControlName="gstin" placeholder="GSTIN" [readonly]="true">
                </mat-form-field>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-4">
                <mat-form-field>
                  <mat-label>Gender</mat-label>
                  <input type="text" matInput formControlName="gender" placeholder="Gender" [readonly]="true">
                </mat-form-field>
              </div>
              <div class="col-lg-4">
                <mat-form-field>
                  <mat-label>Date Of Birth</mat-label>
                  <input type="text" matInput formControlName="dateOfBirth" placeholder="Date Of Birth"
                    [readonly]="true">
                </mat-form-field>
              </div>
              <div class="col-lg-4">
                <mat-form-field>
                  <mat-label>Passport Number</mat-label>
                  <input type="text" matInput formControlName="passportNumber" placeholder="Passport Number"
                    [readonly]="true">
                </mat-form-field>
              </div>
            </div>

          </form>
        </mat-expansion-panel>
        <!--End Customer Details-->

        <!--Start Policy Term-->
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Policy Type
            </mat-panel-title>
          </mat-expansion-panel-header>
          <form [formGroup]="policyTermForm" [ngClass]="{disabledDiv: _isViewPolicyActive}">
            <hr style="margin-top: 0px;" />
            <div class="row">
              <div class="col-lg-6">
                <mat-form-field appearance="fill">
                  <mat-label>Policy Type</mat-label>
                  <mat-select formControlName="policyType" required (selectionChange)="getPolicyTerms()"
                    [disabled]="_type !== SearchPolicyType.Motor_Renew">
                    <mat-option>Select</mat-option>
                    <mat-option *ngFor="let policyType of _policyTypes" [value]="policyType.Value">{{policyType.Name}}
                    </mat-option>
                  </mat-select>
                  <mat-error *ngIf="policyTermForm.controls.policyType">Please Select Policy Type</mat-error>
                </mat-form-field>
              </div>
              <div class="col-lg-6" *ngIf="MenuVertical=='Motor'">
                <mat-form-field appearance="fill">
                  <mat-label>Vehicle Class</mat-label>
                  <mat-select formControlName="vehicleClass" required (selectionChange)="getPolicyTerms()">
                    <mat-option>Select</mat-option>
                    <mat-option *ngFor="let vehicleclass of _vehicleClasses" [value]="vehicleclass.Value">
                      {{vehicleclass.Name}}</mat-option>
                  </mat-select>
                  <mat-error *ngIf="policyTermForm.controls.vehicleClass">Please Select Vehicle Class</mat-error>
                </mat-form-field>
              </div>
            </div>
            <div class="row" *ngIf="MenuVertical=='Motor'">
              <div class="col-lg-6">
                <mat-form-field appearance="fill">
                  <mat-label>Package Type</mat-label>
                  <mat-select formControlName="packageType" required (selectionChange)="getPolicyTerms()">
                    <mat-option>Select</mat-option>
                    <mat-option *ngFor="let packageType of _packageTypes" [value]="packageType.Value">
                      {{packageType.Name}}
                    </mat-option>
                  </mat-select>
                  <mat-error *ngIf="policyTermForm.controls.packageType">Please choose Package Type</mat-error>
                </mat-form-field>
              </div>

            </div>
            <div class="row">
              <div class="col-lg-6">
                <mat-form-field>
                  <mat-label>Acknowledgement Slip Number</mat-label>
                  <input type="text" matInput formControlName="acknowledgementSlipNumber"
                    placeholder="Acknowledgement Slip Number" style="line-height: 30px;">
                </mat-form-field>
              </div>
              <div class="col-lg-6">
                <mat-form-field appearance="fill">
                  <mat-label>Acknowledgement Slip Issue Date</mat-label>
                  <input matInput [matDatepicker]="AKGSlipIssueDate" formControlName="acknowledgementSlipIssueDate">
                  <mat-datepicker-toggle matSuffix [for]="AKGSlipIssueDate"></mat-datepicker-toggle>
                  <mat-datepicker #AKGSlipIssueDate></mat-datepicker>
                </mat-form-field>
              </div>
            </div>
          </form>
        </mat-expansion-panel>
        <!--End PolicyTerm-->

        <!--Start Policy Details-->
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Policy Details
            </mat-panel-title>
          </mat-expansion-panel-header>
          <form [formGroup]="policyForm" [ngClass]="{disabledDiv: _isViewPolicyActive}">
            <hr style="margin-top: 0px;" />
            <div class="row">
              <div class="col-lg-6">
                <mat-form-field>
                  <mat-label>{{(MenuVertical=='Motor')? 'Cover Note Number' : 'Proposal Number'}} </mat-label>
                  <input type="text" matInput formControlName="coverNoteNumber" [ngStyle]="{'line-height':'30px'}"
                    class="uppercase">
                </mat-form-field>
              </div>
              <div class="col-lg-6">
                <mat-form-field appearance="fill">
                  <mat-label> {{(MenuVertical=='Motor')?'Cover Note Issue Date' : 'Proposal Date'}} </mat-label>
                  <input matInput [matDatepicker]="CNIssueDate" formControlName="coverNoteIssueDate">
                  <mat-datepicker-toggle matSuffix [for]="CNIssueDate"></mat-datepicker-toggle>
                  <mat-datepicker #CNIssueDate></mat-datepicker>
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-12">
                <h4 *ngIf="MenuVertical=='Motor'">{{(MenuVertical=='Motor')?'TP Policy Details' : 'Policy Details'}}
                </h4>
              </div>
            </div>
            <hr style="margin-top: 0px;" />
            <div class="row">
              <div class="col-lg-8">
                <mat-form-field appearance="fill" [ngClass]="{disabledDiv: isTpInsuranceDisable}">
                  <mat-label>{{(MenuVertical=='Motor')?'TP Insurance Company' : 'Insurance Company'}}</mat-label>
                  <input type="text"
                    [placeholder]="(MenuVertical=='Motor')?'TP Insurance Company' : 'Insurance Company'"
                    aria-label="(MenuVertical=='Motor')?'TP Insurance Company' : 'Insurance Company'" matInput
                    formControlName="tpInsuranceCompany" [matAutocomplete]="autoInsuranceCompany">
                  <mat-autocomplete autoActiveFirstOption #autoInsuranceCompany="matAutocomplete"
                    [displayWith]="getInsuranceCompanyName.bind(this)" (optionSelected)='getInsuranceCompanyBranches()'>
                    <mat-option *ngFor="let insuranceCompany of _filteredInsuranceCompaniesOptions"
                      [value]="insuranceCompany.Value">
                      {{insuranceCompany.Name}}
                    </mat-option>

                  </mat-autocomplete>

                  <mat-error style="padding-right: 0px; margin-left: 0px;">{{(MenuVertical=='Motor')?'Please Select TP
                    Insurance Company' : 'Please Select Insurance Company'}}
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-8">
                <mat-form-field>
                  <mat-label>Policy Number <span style="color:red">*</span></mat-label>
                  <input type="text" matInput formControlName="policyNumber" [errorStateMatcher]="matcher"
                    placeholder="Policy Number" maxl ength="30">
                  <mat-error *ngIf="policyForm.controls.policyNumber">
                    Policy Number is <strong>required</strong>
                  </mat-error>
                </mat-form-field>
              </div>

            </div>
            <div class="row">
              <div class="col-lg-4">
                <mat-form-field appearance="fill">
                  <mat-label>{{(MenuVertical=='Motor')?'TP Start Date' : isTravel ? 'Date of Departure': 'Risk Start
                    Date'}}</mat-label>
                  <input matInput [matDatepicker]="StartDate" formControlName="tpStartDate"
                    (dateChange)="setExpiryDate('tp')">
                  <mat-datepicker-toggle matSuffix [for]="StartDate"></mat-datepicker-toggle>
                  <mat-datepicker #StartDate></mat-datepicker>
                </mat-form-field>
              </div>
              <div class="col-lg-4">
                <mat-form-field appearance="fill">
                  <mat-label>Number of Year</mat-label>
                  <mat-select formControlName="tpNumberOfYear" required (selectionChange)="setExpiryDate('tp')">
                    <mat-option>Select</mat-option>
                    <mat-option *ngFor="let numberofyear of _numberOfYears" [value]="numberofyear.Value">
                      {{numberofyear.Name}}</mat-option>
                  </mat-select>
                  <mat-error *ngIf="policyForm.controls.tpNumberOfYear">Please Select Number of Year</mat-error>
                </mat-form-field>
              </div>

              <div class="col-lg-4">
                <mat-form-field appearance="fill">
                  <mat-label>{{(MenuVertical=='Motor')?'Expiry Date': isTravel ? 'Date of Return' : 'Risk End Date'}}
                  </mat-label>
                  <input matInput [matDatepicker]="ExpiryDate" formControlName="tpExpiryDate" />
                  <mat-datepicker-toggle matSuffix [for]="ExpiryDate"></mat-datepicker-toggle>
                  <mat-datepicker #ExpiryDate></mat-datepicker>
                </mat-form-field>
              </div>
            </div>
            <hr />
            <div class="row" *ngIf="isMarine">

              <div class="col-lg-8">
                <div class="row">
                  <div class="col-lg-4">
                    <mat-form-field appearance="fill">
                      <mat-label>Storage Risk Id</mat-label>
                      <mat-select formControlName="storageriskid" required>
                        <mat-option>Select</mat-option>
                        <mat-option *ngFor="let storageRisk of _storageRisk" [value]="storageRisk.Value">
                          {{storageRisk.Name}}
                        </mat-option>
                      </mat-select>
                      <mat-error *ngIf="policyForm.controls.storageriskid">Please Select Storage Risk</mat-error>
                    </mat-form-field>
                  </div>
                  <div class="col-lg-4">
                    <mat-form-field appearance="fill">
                      <mat-label>Hypothentication</mat-label>
                      <mat-select formControlName="hypothentication" required>
                        <mat-option>Select</mat-option>
                        <mat-option *ngFor="let financer of _financers" [value]="financer.Value">{{financer.Name}}
                        </mat-option>
                      </mat-select>
                      <mat-error *ngIf="policyForm.controls.hypothentication">Please Select Storage Risk</mat-error>
                    </mat-form-field>
                  </div>
                </div>
              </div>
            </div>

            <div class="row" *ngIf="isFire">

              <div class="col-lg-4">
                <mat-form-field appearance="fill">
                  <mat-label>Occupancy</mat-label>
                  <input type="text" matInput formControlName="occupancy" class="uppercase">
                  <mat-error *ngIf="policyForm.controls.occupancy">Please Select Occupancy</mat-error>
                </mat-form-field>
              </div>
              <div class="col-lg-4">
                <mat-form-field appearance="fill">
                  <mat-label>Line of Businness</mat-label>
                  <input type="text" matInput formControlName="lineofBusiness" class="uppercase">
                  <mat-error *ngIf="policyForm.controls.lineofBusiness">Please Select Line Business</mat-error>
                </mat-form-field>
              </div>
              <div class="col-lg-4">
                <mat-form-field appearance="fill">
                  <mat-label>Basement Exposure</mat-label>
                  <mat-select formControlName="basementExposure" required>
                    <mat-option>Select</mat-option>
                    <mat-option *ngFor="let baseexposure of _baseExposure" [value]="baseexposure.Value">
                      {{baseexposure.Name}}
                    </mat-option>
                  </mat-select>
                  <mat-error *ngIf="policyForm.controls.basementExposure">Please Select Basement Exposure</mat-error>
                </mat-form-field>
              </div>
            </div>
            <div class="row" *ngIf="isFire">
              <div class="col-lg-4">
                <mat-radio-group formControlName="locationType">

                  <div class="row">

                    <div class="col-lg-2">
                      <br>
                      <mat-label>Location Type</mat-label>

                    </div>

                    <div class="col-lg-3">

                      <mat-radio-button [value]="1" color="primary" style="margin-top: 15px;"
                        [checked]="policyForm?.value.locationType == 1">
                        Single
                      </mat-radio-button>

                    </div>
                    <div class="col-lg-3">

                      <mat-radio-button [value]="2" color="primary" style="margin-top: 15px;"
                        [checked]="policyForm?.value.locationType == 2">
                        Multiple
                      </mat-radio-button>
                    </div>
                  </div>
                </mat-radio-group>

              </div>
              <div class="col-lg-4">
                <mat-form-field appearance="fill">
                  <mat-label>Number of location</mat-label>
                  <input type="number" matInput formControlName="numberofLocation" class="uppercase">
                </mat-form-field>
              </div>
              <div class="col-lg-4">
                <mat-form-field appearance="fill">
                  <mat-label>Primary Risk Location</mat-label>
                  <input type="text" matInput formControlName="riskLocation" class="uppercase">
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-4">
                <mat-form-field appearance="fill">
                  <mat-label>Insurance Branch</mat-label>
                  <mat-select formControlName="insuranceBranch" required>
                    <mat-option>Select</mat-option>
                    <mat-option *ngFor="let branch of _insuranceCompanyBranches" [value]="branch.Value">{{branch.Name}}
                    </mat-option>
                  </mat-select>
                  <mat-error *ngIf="policyForm.controls.insuranceBranch">Please Select Insurance Branch</mat-error>
                </mat-form-field>
              </div>
              <div class="col-lg-8">
                <div class="row">
                  <div class="col-lg-4" style="margin-top: 15px;">
                    <mat-checkbox color="primary" formControlName="isAll">Insurance Branch Office - All</mat-checkbox>
                  </div>
                  <div class="col-lg-8" style="margin-top: 5px;">
                    <button type="button" mat-raised-button color="primary"
                      (click)="getInsuranceCompanyBranches()">Refresh</button>
                  </div>
                </div>
              </div>
            </div>
            <section *ngIf="_type != 1">
              <div class="row">
                <div class="col-lg-8">
                  <h4>Previous Policy Details</h4>
                </div>
                <div class="col-lg-4">
                  <mat-checkbox color="primary" style="margin-top: 15px;" (change)="prvePolicydisableFields($event)"
                    formControlName="isPreviousPolicyApplicable">
                    Previous policy not applicable</mat-checkbox>
                </div>
              </div>
              <hr style="margin-top: 0px;" />
              <div class="row" [ngClass]="{disabledDiv: _disableFields}">
                <div class="col-lg-12">

                  <mat-form-field appearance="fill">
                    <mat-label>{{(MenuVertical=='Motor')?'Last Year Insurance Company' : 'Previous Policy Insurance
                      Company'}}</mat-label>
                    <input type="text"
                      [placeholder]="(MenuVertical=='Motor')?'Last Year Insurance Company' : 'Previous Policy Insurance Company'"
                      matInput required [disabled]="_disableFields" formControlName="lastYearInsuranceCompany"
                      [matAutocomplete]="autoInsuranceCompanyLastYear">
                    <mat-autocomplete autoActiveFirstOption #autoInsuranceCompanyLastYear="matAutocomplete"
                      [displayWith]="getInsuranceCompanyLastName.bind(this)">
                      <mat-option *ngFor="let insuranceCompany of _filteredInsuranceCompaniesLastOptions"
                        [value]="insuranceCompany.Value">
                        {{insuranceCompany.Name}}
                      </mat-option>
                    </mat-autocomplete>

                    <mat-error *ngIf="policyForm.controls.lastYearInsuranceCompany">{{(MenuVertical=='Motor')?'Please
                      choose Last
                      Year Insurance Company' : 'Please choose Previous Policy Insurance Company'}} </mat-error>
                  </mat-form-field>
                </div>
              </div>
              <div class="row" [ngClass]="{disabledDiv: _disableFields}">
                <div class="col-lg-6">
                  <mat-form-field>
                    <mat-label> {{(MenuVertical=='Motor')?'Previous CN / Policy Number' : 'Previous Policy Number'}}
                      <span style="color:red">*</span>
                    </mat-label>
                    <input type="text" matInput formControlName="previousCnPolicyNumber" [errorStateMatcher]="matcher"
                      [placeholder]="(MenuVertical=='Motor')?'Previous CN / Policy Number' : 'Previous Policy Number'"
                      style="line-height: 30px;" [readonly]="_disableFields">
                    <mat-error *ngIf="policyForm.controls.previousCNPolicyNumber">
                      {{(MenuVertical=='Motor')?'Previous CN / Policy Number ' : 'Previous Policy Number '}} <strong>is
                        required</strong>
                    </mat-error>
                  </mat-form-field>
                </div>
                <div class="col-lg-6">
                  <mat-form-field appearance="fill">
                    <mat-label> {{(MenuVertical=='Motor')?'Last Policy Expiry Date' : 'Previous Policy End Date'}}
                    </mat-label>
                    <input matInput [matDatepicker]="LastPolicyExpiryDate" formControlName="lastPolicyExpiryDate"
                      [disabled]="_disableFields">
                    <mat-datepicker-toggle matSuffix [for]="LastPolicyExpiryDate" [disabled]="_disableFields">
                    </mat-datepicker-toggle>
                    <mat-datepicker #LastPolicyExpiryDate></mat-datepicker>
                  </mat-form-field>
                </div>
              </div>
              <div class="row" *ngIf="MenuVertical!='Motor'">
                <div class="col-lg-6">
                  <mat-form-field>
                    <mat-label> Previous Policy Plan <span style="color:red"
                        *ngIf="_type !== SearchPolicyType.Motor_Renew">*</span></mat-label>
                    <input type="text" matInput formControlName="previousPolicyPlan" placeholder="Previous Policy Plan"
                      style="line-height: 30px;" class="uppercase" [disabled]="_disableFields">
                  </mat-form-field>
                </div>
                <div class="col-lg-6">
                  <mat-form-field>
                    <mat-label> Previous Policy SumInsured <span style="color:red"
                        *ngIf="_type !== SearchPolicyType.Motor_Renew">*</span></mat-label>
                    <input type="text" matInput formControlName="previousPolicySumInsured"
                      placeholder="Previous Policy SumInsured" style="line-height: 30px;" [disabled]="_disableFields">
                  </mat-form-field>
                  <mat-error
                    *ngIf="policyForm.controls.previousPolicySumInsured.errors && policyForm.controls.previousPolicySumInsured.errors.pattern">
                    Previous Policy SumInsured Number is <strong>invalid</strong>
                  </mat-error>
                </div>
              </div>

            </section>
          </form>
        </mat-expansion-panel>
        <!--End Policy Details-->

        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Product & Plan Type
            </mat-panel-title>
          </mat-expansion-panel-header>
          <form [formGroup]="productPlanForm" [ngClass]="{disabledDiv: _isViewPolicyActive}">
            <hr style="margin-top: 0px;" />
            <div class="row">
              <div class="col-lg-4">
                <mat-form-field appearance="fill">
                  <mat-label>Product</mat-label>
                  <mat-select formControlName="product" required (selectionChange)="getPlan()">
                    <mat-option>Select</mat-option>
                    <mat-option *ngFor="let products of _products" [value]="products.Value">
                      {{products.Name}}</mat-option>
                  </mat-select>
                  <mat-error *ngIf="policyTermForm.controls.policyType">Please Select Product</mat-error>
                </mat-form-field>
              </div>

              <div class="col-lg-4">
                <mat-form-field appearance="fill">
                  <mat-label>Plan</mat-label>
                  <mat-select formControlName="plan">
                    <mat-option>Select</mat-option>
                    <mat-option *ngFor="let plans of _plans" [value]="plans.Value">
                      {{plans.Name}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
          </form>
        </mat-expansion-panel>

        <!--Star  Marine -->
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false"
          *ngIf="this._verticalId ==  Vertical.Marine">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Marine
            </mat-panel-title>
          </mat-expansion-panel-header>
          <form [formGroup]="marineTermForm">
            <hr style="margin-top: 0px;" />
            <div class="row">

              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Voyage Type</mat-label>
                  <mat-select formControlName="voyageType" required (selectionChange)="getPlan()">
                    <mat-option>Select</mat-option>
                    <mat-option *ngFor="let voyageType of _voyageType" [value]="voyageType.Value">
                      {{voyageType.Name}}</mat-option>
                  </mat-select>
                  <mat-error *ngIf="policyTermForm.controls.voyageType">Please Select Voyage</mat-error>
                </mat-form-field>
              </div>

              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Coverage</mat-label>
                  <mat-select formControlName="coverageInland" required>
                    <mat-option>Select</mat-option>
                    <mat-option *ngFor="let commisionInland of _commisionInland" [value]="commisionInland.Value">
                      {{commisionInland.Name}}</mat-option>
                  </mat-select>
                  <mat-error *ngIf="policyTermForm.controls.coverageInland">Please Select Voyage</mat-error>

                </mat-form-field>
              </div>
              <div class="col-lg-6">
                <div class="row">
                  <div class="col-lg-2">

                    <div>Transit Required</div>
                  </div>
                  <div class="col-lg-2">
                    <mat-form-field appearance="fill">
                      <mat-label>From</mat-label>
                      <input type="text" matInput formControlName="fromTransitDomestic" class="uppercase">
                    </mat-form-field>
                  </div>
                  <div class="col-lg-2">
                    <mat-form-field appearance="fill">
                      <mat-label>To</mat-label>
                      <input type="text" matInput formControlName="toTransitDomestic" class="uppercase">
                    </mat-form-field>
                  </div>
                </div>

              </div>
            </div>
            <div class="row">

              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Rate</mat-label>
                  <input type="text" matInput formControlName="rate" class="uppercase" required>
                </mat-form-field>
              </div>

              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Sum Insured</mat-label>
                  <input type="text" matInput formControlName="sumInsured" class="uppercase" required
                    (change)="calculateMarineSumInsured()">
                </mat-form-field>
              </div>
              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Endrose Sum Insured</mat-label>
                  <input type="number" matInput formControlName="endroseSumInsured" class="uppercase" required
                    (change)="calculateMarineSumInsured()">
                </mat-form-field>
              </div>
              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Total Sum Insured</mat-label>
                  <input type="number" matInput formControlName="totalSumInsured" class="uppercase" required readonly>
                </mat-form-field>
              </div>

            </div>
          </form>
        </mat-expansion-panel>
        <!--End Marine-->
            
        <!--Star  liability -->
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false"
          *ngIf="this._verticalId ==  Vertical.Liabality">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Liabilty
            </mat-panel-title>
          </mat-expansion-panel-header>
          <form [formGroup]="liabilityTermForm">
            <hr style="margin-top: 0px;" />
            <div class="row">

              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Total Sum Insured</mat-label>
                  <input type="number" matInput formControlName="liabilityTotalSum" class="uppercase">
                </mat-form-field>
              </div>

              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>No of Worker</mat-label>
                  <input type="number" matInput formControlName="liabilityNoOfWorker" class="uppercase">
                </mat-form-field>
              </div>
              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Nature of Coverage</mat-label>
                  <input type="text" matInput formControlName="liabilityNatureofCoverage" class="uppercase">
                </mat-form-field>

              </div>
              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Excess Clause</mat-label>
                  <input type="text" matInput formControlName="liabilityExcessClause" class="uppercase">
                </mat-form-field>

              </div>
            </div>
            <div class="row">

              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Retro Spective Date</mat-label>
                  <input matInput [matDatepicker]="liabilityRetroDate" formControlName="liabilityRetroDate">
                  <mat-datepicker-toggle matSuffix [for]="liabilityRetroDate"></mat-datepicker-toggle>
                  <mat-datepicker #liabilityRetroDate></mat-datepicker>                
                </mat-form-field>
              </div>

              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Other Info</mat-label>
                  <input type="text" matInput formControlName="liabilityOtherInfo" class="uppercase" required
                   >
                </mat-form-field>
              </div>
              <div class="col-md-6">
              <mat-radio-group formControlName="liabilityRiskLocatiion" >
                <div class="row">

                  <div class="col-lg-2">
                    Risk Location
                  </div>
                  <div class="col-lg-3">
                    <mat-radio-button [value]="1" color="primary" >
                      Single
                    </mat-radio-button>
                  </div>
                  <div class="col-lg-3">
                    <mat-radio-button [value]="2" color="primary" >
                    Multiple
                    </mat-radio-button>
                  </div>
                </div>
              </mat-radio-group>
            </div>
            </div>
          </form>
        </mat-expansion-panel>
        <!--End liability-->

        <!--Start  Enginnering -->
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false"
                *ngIf="this._verticalId ==  Vertical.Engineering">
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    Enginnering
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <form [formGroup]="engineeringTermForm">
                  <hr style="margin-top: 0px;" />
                  <div class="row">
      
                    <div class="col-lg-3">
                      <mat-form-field appearance="fill">
                        <mat-label>Total Sum Insured</mat-label>
                        <input type="number" matInput formControlName="enginneringTotalSum" class="uppercase">
                      </mat-form-field>
                    </div>
      
                    <div class="col-lg-3">
                      <mat-form-field appearance="fill">
                        <mat-label>Rate</mat-label>
                        <input type="number" matInput formControlName="enginneringRate" class="uppercase">
                      </mat-form-field>
                    </div>
                    <div class="col-lg-3">
                      <mat-form-field appearance="fill">
                        <mat-label>Nature of Coverage</mat-label>
                        <input type="text" matInput formControlName="enginneringNatureofCoverage" class="uppercase">
                      </mat-form-field>
      
                    </div>
                 
                  </div>
                  <div class="row">
      
                    <div class="col-lg-3">
                      <mat-form-field appearance="fill">
                        <mat-label>Non Liabality Period</mat-label>
                        <input matInput [matDatepicker]="enginneringPeriod" formControlName="enginneringPeriodDate" >
                        <mat-datepicker-toggle matSuffix [for]="enginneringPeriod"></mat-datepicker-toggle>
                        <mat-datepicker #enginneringPeriod></mat-datepicker>                
                      </mat-form-field>
                    </div>
      
                    <div class="col-lg-3">
                      <mat-form-field appearance="fill">
                        <mat-label>Other Info</mat-label>
                        <input type="text" matInput formControlName="enginneringOtherInfo" class="uppercase" required
                         >
                      </mat-form-field>
                    </div>
                    <div class="col-md-6">
                    <mat-radio-group formControlName="enginneringRiskLocatiion" >
                      <div class="row">
      
                        <div class="col-lg-2">
                          Risk Location
                        </div>
                        <div class="col-lg-3">
                          <mat-radio-button [value]="1" color="primary" >
                            Single
                          </mat-radio-button>
                        </div>
                        <div class="col-lg-3">
                          <mat-radio-button [value]="2" color="primary" >
                          Multiple
                          </mat-radio-button>
                        </div>
                      </div>
                    </mat-radio-group>
                  </div>
                  </div>
                </form>
        </mat-expansion-panel>
        <!--End liability-->

              
        <!--Start  Gmc -->
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false"
                *ngIf="this._verticalId ==  Vertical.GMC">
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    GMC
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <form [formGroup]="gmcTermForm">
                  <hr style="margin-top: 0px;" />
                  <div class="row">
      
                    <div class="col-lg-3">
                      <mat-form-field appearance="fill">
                        <mat-label>Coverage Type</mat-label>
                        <mat-select formControlName="gmcCoveragetype"
                        >
                        <mat-option>Select</mat-option>
                        <mat-option *ngFor="let coverageType of _coverage" [value]="coverageType.Value">
                          {{coverageType.Name}}</mat-option>
                      </mat-select>                      
                    </mat-form-field>
                    </div>
      
                    <div class="col-lg-3">
                      <mat-form-field appearance="fill">
                        <mat-label>No of Employee</mat-label>
                        <input type="number" matInput formControlName="gmcNoofEmployee" class="uppercase" (keyup)="gmcTotalLife()">
                      </mat-form-field>
                    </div>
                    <div class="col-lg-3">
                      <mat-form-field appearance="fill">
                        <mat-label>No of Dependent</mat-label>
                        <input type="number" matInput formControlName="gmcNoofDependent" class="uppercase"  (keyup)="gmcTotalLife()">
                      </mat-form-field>
      
                    </div>
                    <div class="col-lg-3">
                      <mat-form-field appearance="fill">
                        <mat-label>No of Life</mat-label>
                        <input type="text" matInput formControlName="gmcNoofLife" class="uppercase">
                      </mat-form-field>
      
                    </div>
                 
                  </div>
                  <div class="row">
      
                    <div class="col-lg-3">
                      <mat-form-field appearance="fill">
                        <mat-label>Coverage</mat-label>
                        <input type="text" matInput formControlName="gmcCoverage" class="uppercase" >
        
                      </mat-form-field>
                    </div>
      
                    <div class="col-lg-3">
                      <mat-form-field appearance="fill">
                        <mat-label>Other Info</mat-label>
                        <input type="text" matInput formControlName="gmcOtherInfo" class="uppercase" required
                         >
                      </mat-form-field>
                    </div>
                    <div class="col-lg-3">
                      <mat-form-field appearance="fill">
                          <mat-label>Cover Type</mat-label>
                          <mat-select formControlName="gmcCovertype"
                          >
                          <mat-option>Select</mat-option>
                          <mat-option *ngFor="let _coverType of _coverType" [value]="_coverType.Value">
                            {{_coverType.Name}}
                          </mat-option>
                        </mat-select>                      
                      </mat-form-field>
                    </div>
                    <div class="col-md-3">
                      <mat-form-field appearance="fill">
                        <mat-label>Co-operate Buffer Limit</mat-label>
                        <input type="number" matInput formControlName="gmcCooperateLimit" class="uppercase" required
                         >
                      </mat-form-field>
                  </div>
                  </div>
                </form>
        </mat-expansion-panel>
        <!--End liability-->

        <!--Start Fire Term-->
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false"
          *ngIf="this._verticalId ==  Vertical.Fire">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Fire Panel
            </mat-panel-title>
          </mat-expansion-panel-header>
          <form [formGroup]="fireTermForm">
            <div class="row">

              <div class="col-lg-4">
                <table class="table-responsive" style="overflow: hidden;">
                  <thead style="border-style:hidden;">
                    <th style="width: 30%;"></th>
                    <th style="border-style:hidden;">Sum Insured</th>
                    <th style="border-style:hidden;">Rate</th>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <b>Fire</b>
                      </td>
                      <td>
                        <mat-form-field>
                          <input type="text" matInput formControlName="fireSA" class="uppercase"
                            (change)="calculatTotalFiredSumInsured()">
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field>
                          <input type="text" matInput formControlName="fireRate" class="uppercase">
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <b>EarthQuake</b>
                      </td>
                      <td>
                        <mat-form-field>
                          <input type="text" matInput formControlName="earthQuakeSA" class="uppercase"
                            (change)="calculatTotalFiredSumInsured()">
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field>
                          <input type="text" matInput formControlName="earthQuakeRate" class="uppercase">
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <b>STFI</b>
                      </td>
                      <td>
                        <mat-form-field>
                          <input type="text" matInput formControlName="sTFISA" class="uppercase"
                            (change)="calculatTotalFiredSumInsured()">
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field>
                          <input type="text" matInput formControlName="sTFIRate" class="uppercase">
                        </mat-form-field>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="col-lg-4">
                <table class="table-responsive" style="overflow: hidden;">
                  <thead style="border-style:hidden;">
                    <th style="width: 30%;"></th>
                    <th style="border-style:hidden;">Sum Insured</th>
                    <th style="border-style:hidden;">Rate</th>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <b>Terrorism</b>
                      </td>
                      <td>
                        <mat-form-field>
                          <input type="text" matInput formControlName="terrorismSA" class="uppercase"
                            (change)="calculatTotalFiredSumInsured()">
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field>
                          <input type="text" matInput formControlName="terrorismRate" class="uppercase">
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <b>Bulgary</b>
                      </td>
                      <td>
                        <mat-form-field>
                          <input type="text" matInput formControlName="burglarySA" class="uppercase"
                            (change)="calculatTotalFiredSumInsured()">
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field>
                          <input type="text" matInput formControlName="burglaryRate" class="uppercase">
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <b>Money</b>
                      </td>
                      <td>
                        <mat-form-field>
                          <input type="text" matInput formControlName="moneySA" class="uppercase"
                            (change)="calculatTotalFiredSumInsured()">
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field>
                          <input type="text" matInput formControlName="moneyRate" class="uppercase">
                        </mat-form-field>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="col-lg-4">
                <table class="table-responsive" style="overflow: hidden;">
                  <thead style="border-style:hidden;">
                    <th style="width: 30%;"></th>
                    <th style="border-style:hidden;">Sum Insured</th>
                    <th style="border-style:hidden;">Rate</th>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <b>Breakdown</b>
                      </td>
                      <td>
                        <mat-form-field>
                          <input type="text" matInput formControlName="breakDownSA" class="uppercase"
                            (change)="calculatTotalFiredSumInsured()">
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field>
                          <input type="text" matInput formControlName="breakDownRate" class="uppercase">
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <b>Plateglass</b>
                      </td>
                      <td>
                        <mat-form-field>
                          <input type="text" matInput formControlName="plateGlassSA" class="uppercase"
                            (change)="calculatTotalFiredSumInsured()">
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field>
                          <input type="text" matInput formControlName="plateGlassRate" class="uppercase">
                        </mat-form-field>
                      </td>
                    </tr>

                  </tbody>
                </table>

              </div>
            </div>
            <div class="row">
              <div class="col-md-4">

              </div>

              <div class="col-md-4">
                <mat-form-field>
                  <mat-label>Total Sum Insured</mat-label>

                  <input type="text" matInput formControlName="sumInsured" class="uppercase">
                </mat-form-field>
              </div>
            </div>
          </form>
        </mat-expansion-panel>
        <!--End Fire term-->

        <!--Start  Misc -->
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false"
          *ngIf="this._verticalId ==  Vertical.Misc">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Miscellenous
            </mat-panel-title>
          </mat-expansion-panel-header>
          <form [formGroup]="miscform">
            <hr style="margin-top: 0px;" />
            <div class="row">

              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Rate</mat-label>
                  <input type="text" matInput formControlName="miscrate" class="uppercase">
                  <mat-error *ngIf="miscform.controls.miscrate">Please Select Rate</mat-error>
                </mat-form-field>
              </div>
              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Miscellenous 1</mat-label>
                  <input type="text" matInput formControlName="misc1" class="uppercase">
                  <mat-error *ngIf="miscform.controls.occupancy">Please Select Miscellenous</mat-error>
                </mat-form-field>
              </div>
              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Miscellenous 2</mat-label>
                  <input type="text" matInput formControlName="misc1" class="uppercase">
                  <mat-error *ngIf="miscform.controls.misc2">Please Select Miscellenous</mat-error>
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Miscellenous 3</mat-label>
                  <input type="text" matInput formControlName="misc1" class="uppercase">
                  <mat-error *ngIf="miscform.controls.misc3">Please Select Miscellenous</mat-error>
                </mat-form-field>
              </div>
              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Miscellenous 4</mat-label>
                  <input type="text" matInput formControlName="misc1" class="uppercase">
                  <mat-error *ngIf="miscform.controls.misc4">Please Select Miscellenous</mat-error>
                </mat-form-field>
              </div>
              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Miscellenous 5</mat-label>
                  <input type="text" matInput formControlName="misc1" class="uppercase">
                  <mat-error *ngIf="miscform.controls.misc5">Please Select Miscellenous</mat-error>
                </mat-form-field>
              </div>

            </div>
          </form>
        </mat-expansion-panel>
        <!--End Misc-->
        <!--Start Premium Details-->
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Premium Details
            </mat-panel-title>
          </mat-expansion-panel-header>
          <form [formGroup]="premiumForm" [ngClass]="{disabledDiv: _isViewPolicyActive}">
            <hr style="margin-top: 0px;" />
            <div class="row">
              <div class="col-lg-3" *ngIf="isTravel">
                <mat-form-field>
                  <mat-label>Family Discount</mat-label>
                  <input type="text" matInput formControlName="familyDiscount" [errorStateMatcher]="matcher"
                    (change)="calculateTotalTp()" placeholder="Family Discount" numbersOnlyWithOutDecimal maxlength="9"
                    keyUpMaxValue>
                  <mat-error *ngIf="premiumForm.controls.vehicleIdv">
                    Family Discount is <strong>required</strong>
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-lg-3">
                <mat-form-field>
                  <mat-label>Terrorism Premium</mat-label>
                  <input type="text" matInput formControlName="terrorimsPremium" class="uppercase">
                </mat-form-field>
              </div>

              <div class="col-lg-2" *ngIf="isHeath || isPA">
                <mat-form-field>
                  <mat-label>Long Term Discount</mat-label>
                  <input type="text" matInput formControlName="longtermDiscount" (change)="calculateTotalTp()"
                    placeholder="Long Term Discount" numbersOnlyWithOutDecimal maxlength="9">
                </mat-form-field>
              </div>
              <div class="col-lg-2" *ngIf="isTravel">
                <mat-form-field>
                  <mat-label>Max Trip Days(Multi Trip)</mat-label>
                  <input type="text" matInput formControlName="maxTripDays" placeholder="Max Trip Days"
                    numbersOnlyWithOutDecimal maxlength="9">
                </mat-form-field>
              </div>
              <div class="col-lg-2">
                <mat-form-field>
                  <mat-label>Section Discount</mat-label>
                  <input type="text" matInput formControlName="sectionDiscount" (change)="calculateTotalTp()"
                    placeholder="Section Discount" numbersOnlyWithOutDecimal maxlength="9">
                </mat-form-field>
              </div>
              <div class="col-lg-2">
                <mat-form-field>
                  <mat-label>Additional Discount</mat-label>
                  <input type="text" matInput formControlName="additionalDiscount" placeholder="Additional Discount"
                    (change)="calculateTotalTp()" numbersOnlyWithOutDecimal maxlength="9">
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-2">
                <mat-form-field>
                  <mat-label>{{(MenuVertical=='Motor')?'Basic TP' : 'Premium'}}<span style="color:red">*</span>
                  </mat-label>
                  <input type="text" matInput formControlName="tp" [errorStateMatcher]="matcher" placeholder="Premium"
                    (change)="calculateTotalTp()" appTwoDigitDecimaNumber
                    [disableControl]="_isOdPremiumDetailsDisabled">
                  <mat-error *ngIf="premiumForm.controls.tp">
                    {{(MenuVertical=='Motor')?'Basic TP' : 'Premium'}} is <strong>required</strong>
                  </mat-error>
                </mat-form-field>
              </div>

              <div class="col-lg-2">
                <mat-form-field>
                  <mat-label>{{(MenuVertical=='Motor')?'Other TP (PC + ODC & PD)' : 'Add to Cover'}}</mat-label>
                  <input type="text" matInput formControlName="passengerCover" placeholder="Add to Cover"
                    (change)="calculateTotalTp()" appTwoDigitDecimaNumber
                    [disableControl]="_isOdPremiumDetailsDisabled">
                </mat-form-field>
              </div>
              <div class="col-lg-2">
                <mat-form-field>
                  <mat-label>Endorse Premium</mat-label>
                  <input type="text" matInput formControlName="endorseTp" placeholder="Endorse Premium"
                    [readonly]="true">
                </mat-form-field>
              </div>
              <div class="col-lg-4">
                <mat-form-field>
                  <mat-label>Total Premium</mat-label>
                  <input type="text" matInput formControlName="totalTp" placeholder="Total Premium" [readonly]="true"
                    (change)="calculateNetPremium()">
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-3">
                <mat-form-field>
                  <mat-label>Non-Commission Component Premium</mat-label>
                  <input type="text" matInput formControlName="nonCommissionComponentPremium"
                    (change)="calculateGrossPremium()" appTwoDigitDecimaNumber>
                </mat-form-field>
              </div>
              <div class="col-lg-3">
                <mat-form-field>
                  <mat-label>Net Premium</mat-label>
                  <input type="text" matInput formControlName="netpremium" [readonly]="true">
                </mat-form-field>
              </div>

              <div class="col-lg-3">
                <mat-form-field>
                  <mat-label>GST % <span style="color:red">*</span></mat-label>
                  <input type="number" matInput formControlName="gst" [errorStateMatcher]="matcher" placeholder="GST %"
                    (change)="calculateGrossPremium()" (input)="keyUpMaxValue($event,maxValueAllowedPercentage)">
                  <mat-error *ngIf="premiumForm.controls.gst">
                    GST % is <strong>required</strong>
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-lg-3">
                <mat-form-field>
                  <mat-label>{{(MenuVertical=='Motor')?'GST Amount' : 'GST'}} </mat-label>
                  <input type="text" matInput formControlName="gstValue" (change)="calculateGrossPremium()"
                    [readonly]="true">
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-4">
                <mat-form-field>
                  <mat-label>Gross Premium</mat-label>
                  <input type="text" matInput formControlName="grossPremium" placeholder="Gross Premium"
                    [readonly]="true">
                </mat-form-field>
              </div>
              <div class="col-lg-4">
                <mat-form-field>
                  <mat-label>Endorse Gross Premium</mat-label>
                  <input type="text" matInput formControlName="endorseGrossPremium" placeholder="Endorse Gross Premium"
                    [readonly]="true">
                </mat-form-field>
              </div>
              <div class="col-lg-4">
                <mat-form-field>
                  <mat-label>Total Gross Premium</mat-label>
                  <input type="text" matInput formControlName="totalGrossPremium" placeholder="Total Gross Premium"
                    [readonly]="true">
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-6">
                <mat-form-field appearance="fill">
                  <mat-label>Commission Paid On</mat-label>
                  <mat-select formControlName="commissionPaidOn"
                    (selectionChange)="calculateCommissionablePremium($event.value)">
                    <mat-option>Select</mat-option>
                    <mat-option *ngFor="let commissionpaidon of _commissionPaidOn" [value]="commissionpaidon.Code">
                      {{commissionpaidon.Name}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-lg-6">
                <mat-form-field>
                  <mat-label>Commissionable Premium</mat-label>
                  <input type="text" matInput formControlName="commissionablePremium" style="line-height: 28px;"
                    [readonly]="true">
                </mat-form-field>
              </div>
            </div>
          </form>
        </mat-expansion-panel>
        <!--End Premium Details-->

        <!--Start Add-On Rider Details-->

        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Add-On Rider Details
            </mat-panel-title>
          </mat-expansion-panel-header>
          <form>
            <hr style="margin-top: 0px;" />
            <div class="row">
              <div class="col-lg-12">
                <mat-form-field appearance="fill">
                  <mat-label>Add-On Plan (Rider)</mat-label>
                  <mat-select [(ngModel)]="_addOnRiderModel.AddOnRiderId" name="addonRider"
                    (selectionChange)="getAddOnPlanOptions($event.value)">
                    <mat-option value="-1">Select</mat-option>
                    <mat-option *ngFor="let addOnrider of _addOnRiders" [value]="addOnrider.Value">{{addOnrider.Name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
            <div class="row" [ngStyle]="{'margin-top':'12px'}">
              <div class="col-lg-3" *ngFor="let option of _addOnPlanOptions; let i = index;">
                <input type="text" matInput name="txtAddOn{{i}}" placeholder="AddonValue"
                  [(ngModel)]="option.AddonValue" style="width: 40%;
                    float: left;
                    line-height: 25px; border-bottom: 1px solid;  margin-right: 10px;" />
                <mat-checkbox color="primary" name="{{i}}"
                  (change)="getCheckboxValue(i, option.IsPlanAvailable, option.AddonPlanOptionName,$event)"
                  [disabled]="option.IsDisabled" [(ngModel)]="option.IsPlanAvailable">
                  {{option.AddonPlanOptionName}}
                </mat-checkbox>
                <p>{{option.AddonPlanOptionDescripation}}</p>
                <hr>
              </div>
            </div>
            <div class="row">
              <p>{{_addOnRiderArray.join(', ') | uppercase}}</p>
            </div>
          </form>
        </mat-expansion-panel>

        <!--End Add-On Rider Details-->



        <!--Start Policy Source-->
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Policy Source Details
            </mat-panel-title>
          </mat-expansion-panel-header>
          <form [formGroup]="policySourceForm" [ngClass]="{disabledDiv: _isViewPolicyActive}">
            <hr style="margin-top: 0px;" />
            <div class="row">
              <div class="col-lg-6">
                <mat-form-field appearance="fill">
                  <mat-label>Tele Caller</mat-label>
                  <mat-select formControlName="teleCaller" (selectionChange)="businessDoneBy()">
                    <mat-option>Select</mat-option>
                    <mat-option *ngFor="let telecaller of _teleCallers" [value]="telecaller.Value">{{telecaller.Name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-lg-6">
                <div class="row">
                  <div class="col-lg-4" style="margin-top: 15px;">
                    <mat-checkbox color="primary" formControlName="isAllTeleCaller">Tele Caller - All Branch
                    </mat-checkbox>
                  </div>
                  <div class="col-lg-4" style="margin-top: 5px;">
                    <button type="button" mat-raised-button color="primary"
                      (click)="refresh(policySourceForm.value.isAllTeleCaller,'teleCaller')">Refresh</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-6">
                <mat-form-field appearance="fill">
                  <mat-label>FOS Name</mat-label>
                  <mat-select formControlName="fosName" (selectionChange)="businessDoneBy()">
                    <mat-option value="0">Select</mat-option>
                    <mat-option *ngFor="let fosname of _fosNames" [value]="fosname.Value">{{fosname.Name}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-lg-6">
                <div class="row">
                  <div class="col-lg-4" style="margin-top: 15px;">
                    <mat-checkbox color="primary" formControlName="isAllFos">FOS - All Branch</mat-checkbox>
                  </div>
                  <div class="col-lg-4" style="margin-top: 5px;">
                    <button type="button" mat-raised-button color="primary"
                      (click)="refresh(policySourceForm.value.isAllFos,'fos')">Refresh</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-6">

                <mat-form-field appearance="fill">
                  <mat-label>POS Name</mat-label>
                  <input type="text" placeholder="POS Name" aria-label="POS Name" matInput formControlName="posName"
                    [matAutocomplete]="autoPos">
                  <mat-autocomplete autoActiveFirstOption #autoPos="matAutocomplete"
                    [displayWith]="getPosForBind.bind(this)" (optionSelected)="businessDoneBy()">
                    <mat-option *ngFor="let posData of _filteredPosOptions" [value]="posData.Value">
                      {{posData.Name}}
                    </mat-option>
                  </mat-autocomplete>
                </mat-form-field>

              </div>
              <div class="col-lg-6">
                <div class="row">
                  <div class="col-lg-4" style="margin-top: 15px;">
                    <mat-checkbox color="primary" formControlName="isAllPos">POS - All Branch</mat-checkbox>
                  </div>
                  <div class="col-lg-4" style="margin-top: 5px;">
                    <button type="button" mat-raised-button color="primary"
                      (click)="refresh(policySourceForm.value.isAllPos,'pos')">Refresh</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-6">
                <mat-form-field appearance="fill">
                  <mat-label>Reference</mat-label>
                  <mat-select formControlName="reference" (selectionChange)="businessDoneBy()">
                    <mat-option>Select</mat-option>
                    <mat-option *ngFor="let reference of _references" [value]="reference.Value">{{reference.Name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-lg-6">
                <div class="row">
                  <div class="col-lg-4" style="margin-top: 15px;">
                    <mat-checkbox color="primary" formControlName="isAllReference">Reference - All Branch</mat-checkbox>
                  </div>
                  <div class="col-lg-4" style="margin-top: 5px;">
                    <button type="button" mat-raised-button color="primary"
                      (click)="refresh(policySourceForm.value.isAllReference,'reference')">Refresh</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-6">
                <mat-form-field>
                  <mat-label>Business Done By</mat-label>
                  <input type="text" matInput formControlName="businessDoneBy" [readonly]="true" />
                </mat-form-field>
              </div>
              <div class="col-lg-6">
                <mat-form-field>
                  <mat-label>POS Managed By</mat-label>
                  <input type="text" matInput formControlName="posManagedBy" [readonly]="true">
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-12">
                <mat-form-field appearance="fill">
                  <mat-label>Policy Remarks</mat-label>
                  <textarea matInput rows="3" formControlName="policyRemarks"></textarea>
                </mat-form-field>
              </div>
            </div>
          </form>
        </mat-expansion-panel>
        <!--End Policy Source-->

        <!--Start Payment Details-->
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Payment Details
            </mat-panel-title>
          </mat-expansion-panel-header>
          <form [formGroup]="paymentForm" autocomplete="off" [ngClass]="{disabledDiv: _isViewPolicyActive}">
            <hr style="margin-top: 0px;" />
            <div class="row">
              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Mode 1</mat-label>
                  <mat-select formControlName="mode1" required>
                    <mat-option>Select</mat-option>
                    <mat-option *ngFor="let paymentType of _paymentTypes" [value]="paymentType.Value">
                      {{paymentType.Name}}
                    </mat-option>
                  </mat-select>
                  <mat-error *ngIf="paymentForm.controls.mode1">Please Select Mode 1</mat-error>
                </mat-form-field>
              </div>
              <div class="col-lg-2">
                <mat-form-field>
                  <mat-label>Amount <span style="color:red">*</span></mat-label>
                  <input type="text" matInput formControlName="amount1" [errorStateMatcher]="matcher"
                    placeholder="Amount" style="line-height: 30px;" appTwoDigitDecimaNumber />
                  <mat-error *ngIf="paymentForm.controls.amount1">
                    Amount is <strong>required</strong>
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-lg-2">
                <mat-form-field>
                  <mat-label>Instrument Number</mat-label>
                  <input type="text" matInput formControlName="instrumentNumber1" placeholder="Instrument Number"
                    style="line-height: 30px;" maxlength="20" />
                  <mat-error
                    *ngIf="paymentForm.controls.instrumentNumber1.errors && paymentForm.controls.instrumentNumber1.errors.pattern">
                    Instrument Number is <strong>invalid</strong>
                  </mat-error>
                  <mat-error
                    *ngIf="paymentForm.controls.instrumentNumber1.errors && paymentForm.controls.instrumentNumber1.errors.maxlength">
                    Maximum number of cheque <strong>is 6 Digit</strong>
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-lg-2">
                <mat-form-field appearance="fill">
                  <mat-label>Dated</mat-label>
                  <input matInput [matDatepicker]="dated1" formControlName="dated1">
                  <mat-datepicker-toggle matSuffix [for]="dated1"></mat-datepicker-toggle>
                  <mat-datepicker #dated1></mat-datepicker>
                </mat-form-field>
              </div>
              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Bank</mat-label>
                  <mat-select formControlName="bank1">
                    <mat-option>Select</mat-option>
                    <mat-option *ngFor="let bank of _banks" [value]="bank.Value">{{bank.Name}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Mode 2</mat-label>
                  <mat-select formControlName="mode2">
                    <mat-option>Select</mat-option>
                    <mat-option *ngFor="let paymentType of _paymentTypes" [value]="paymentType.Value">
                      {{paymentType.Name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-lg-2">
                <mat-form-field>
                  <mat-label>Amount</mat-label>
                  <input type="number" matInput formControlName="amount2" placeholder="Amount"
                    style="line-height: 30px;" appTwoDigitDecimaNumber />
                </mat-form-field>
              </div>
              <div class="col-lg-2">
                <mat-form-field>
                  <mat-label>Instrument Number</mat-label>
                  <input type="text" matInput formControlName="instrumentNumber2" placeholder="Instrument Number"
                    style="line-height: 30px;" maxlength="20" />
                  <mat-error
                    *ngIf="paymentForm.controls.instrumentNumber2.errors && paymentForm.controls.instrumentNumber2.errors.pattern">
                    Instrument Number is <strong>invalid</strong>
                  </mat-error>
                  <mat-error
                    *ngIf="paymentForm.controls.instrumentNumber2.errors && paymentForm.controls.instrumentNumber2.errors.maxlength">
                    Maximum number of cheque <strong>is 6 Digit</strong>
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-lg-2">
                <mat-form-field appearance="fill">
                  <mat-label>Dated</mat-label>
                  <input matInput [matDatepicker]="dated2" formControlName="dated2">
                  <mat-datepicker-toggle matSuffix [for]="dated2"></mat-datepicker-toggle>
                  <mat-datepicker #dated2></mat-datepicker>
                </mat-form-field>
              </div>
              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Bank</mat-label>
                  <mat-select formControlName="bank2">
                    <mat-option>Select</mat-option>
                    <mat-option *ngFor="let bank of _banks" [value]="bank.Value">{{bank.Name}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Mode 3</mat-label>
                  <mat-select formControlName="mode3">
                    <mat-option>Select</mat-option>
                    <mat-option *ngFor="let paymentType of _paymentTypes" [value]="paymentType.Value">
                      {{paymentType.Name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-lg-2">
                <mat-form-field>
                  <mat-label>Amount</mat-label>
                  <input type="text" matInput formControlName="amount3" placeholder="Amount" style="line-height: 30px;"
                    appTwoDigitDecimaNumber />
                </mat-form-field>
              </div>
              <div class="col-lg-2">
                <mat-form-field>
                  <mat-label>Instrument Number</mat-label>
                  <input type="text" matInput formControlName="instrumentNumber3" placeholder="Instrument Number"
                    style="line-height: 30px;" maxlength="20" />
                  <mat-error
                    *ngIf="paymentForm.controls.instrumentNumber3.errors && paymentForm.controls.instrumentNumber3.errors.pattern">
                    Instrument Number is <strong>invalid</strong>
                  </mat-error>
                  <mat-error
                    *ngIf="paymentForm.controls.instrumentNumber3.errors && paymentForm.controls.instrumentNumber3.errors.maxlength">
                    Maximum number of cheque <strong>is 6 Digit</strong>
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-lg-2">
                <mat-form-field appearance="fill">
                  <mat-label>Dated</mat-label>
                  <input matInput [matDatepicker]="dated3" formControlName="dated3">
                  <mat-datepicker-toggle matSuffix [for]="dated3"></mat-datepicker-toggle>
                  <mat-datepicker #dated3></mat-datepicker>
                </mat-form-field>
              </div>
              <div class="col-lg-3">
                <mat-form-field appearance="fill">
                  <mat-label>Bank</mat-label>
                  <mat-select formControlName="bank3">
                    <mat-option>Select</mat-option>
                    <mat-option *ngFor="let bank of _banks" [value]="bank.Value">{{bank.Name}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
          </form>
        </mat-expansion-panel>
        <!--End Payment Details-->

        <!--Start Voucher Details-->
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Voucher Details
            </mat-panel-title>
          </mat-expansion-panel-header>
          <hr style="margin-top: 0px;" />
          <div class="row" *ngIf="_vouchers.length > 0; else elseBlockNoVouchers;">
            <table mat-table [dataSource]="_vouchers" style="width: 100%;">
              <ng-container matColumnDef="voucherNumber">
                <th mat-header-cell *matHeaderCellDef>Number</th>
                <td mat-cell *matCellDef="let element">{{element.VoucherNumber}}</td>
              </ng-container>
              <ng-container matColumnDef="voucherAmount">
                <th mat-header-cell *matHeaderCellDef>Amount</th>
                <td mat-cell *matCellDef="let element">{{element.VoucherAmount}}</td>
              </ng-container>
              <ng-container matColumnDef="voucherType">
                <th mat-header-cell *matHeaderCellDef> Type </th>
                <td mat-cell *matCellDef="let element"> {{element.VoucherType}} </td>
              </ng-container>
              <ng-container matColumnDef="voucherDateString">
                <th mat-header-cell *matHeaderCellDef> Date </th>
                <td mat-cell *matCellDef="let element"> {{element.VoucherDateString}} </td>
              </ng-container>
              <ng-container matColumnDef="voucherStatus">
                <th mat-header-cell *matHeaderCellDef> Status</th>
                <td mat-cell *matCellDef="let element"> {{element.VoucherStatus}} </td>
              </ng-container>
              <ng-container matColumnDef="voucherRemark">
                <th mat-header-cell *matHeaderCellDef> Remark</th>
                <td mat-cell *matCellDef="let element"> {{element.VoucherRemark}} </td>
              </ng-container>
              <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef style="text-align: end;"> Action </th>
                <td class="handOnHover" mat-cell *matCellDef="let element">
                  <div class="row" style="justify-content: flex-end">
                    <div class="col-md-4">
                      <button type="button" mat-icon-button (click)="openVoucherDialog(element)">
                        <mat-icon>visibility</mat-icon>
                      </button>
                    </div>
                  </div>
                </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="_displayedColumnsVouchers"></tr>
              <tr mat-row *matRowDef="let row; columns: _displayedColumnsVouchers;"></tr>
            </table>
          </div>
          <ng-template #elseBlockNoVouchers>
            <div class="alert alert-danger" role="alert">
              No Voucher.
            </div>
          </ng-template>
          <div class="row" *ngIf="_vouchers.length > 0">
            <div class="col-lg-12">
              <h4 class="thick">Total Voucher Amount:- <span>{{getTotalCost() | currency: 'INR'}} /-</span></h4>
            </div>
          </div>
        </mat-expansion-panel>
        <!--End Voucher Details-->

        <!--Start Endorsement Information-->
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Endorsement Information
            </mat-panel-title>
          </mat-expansion-panel-header>
          <form>
            <hr style="margin-top: 0px;" />
            <div class="row">
              <table mat-table [dataSource]="dataSource">
                <ng-container matColumnDef="endorsementReason">
                  <th mat-header-cell *matHeaderCellDef>Endorsement Reason</th>
                  <td mat-cell *matCellDef="let element">{{element.endorsementReason}}</td>
                </ng-container>

                <ng-container matColumnDef="entryDate">
                  <th mat-header-cell *matHeaderCellDef>Entry Date</th>
                  <td mat-cell *matCellDef="let element">{{element.entryDate}}</td>
                </ng-container>

                <ng-container matColumnDef="odChanges">
                  <th mat-header-cell *matHeaderCellDef> OD Changes </th>
                  <td mat-cell *matCellDef="let element"> {{element.odChanges}} </td>
                </ng-container>

                <ng-container matColumnDef="premiumChange">
                  <th mat-header-cell *matHeaderCellDef> Premium Change </th>
                  <td mat-cell *matCellDef="let element"> {{element.premiumChange}} </td>
                </ng-container>

                <ng-container matColumnDef="idvChange">
                  <th mat-header-cell *matHeaderCellDef> IDV Change </th>
                  <td mat-cell *matCellDef="let element"> {{element.idvChange}} </td>
                </ng-container>
                <ng-container matColumnDef="newNcb">
                  <th mat-header-cell *matHeaderCellDef> New NCB </th>
                  <td mat-cell *matCellDef="let element"> {{element.newNcb}}</td>
                </ng-container>
                <ng-container matColumnDef="endrosementRemark">
                  <th mat-header-cell *matHeaderCellDef> Endorsement Remark </th>
                  <td mat-cell *matCellDef="let element"> {{element.endrosementRemark}} </td>
                </ng-container>
                <ng-container matColumnDef="voucherNumber">
                  <th mat-header-cell *matHeaderCellDef> Voucher Number </th>
                  <td mat-cell *matCellDef="let element"> {{element.voucherNumber}} </td>
                </ng-container>
                <ng-container matColumnDef="shortfallAmount">
                  <th mat-header-cell *matHeaderCellDef> Shortfall Amount </th>
                  <td mat-cell *matCellDef="let element"> {{element.shortfallAmount}} </td>
                </ng-container>
                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef> Action </th>
                  <td class="handOnHover" mat-cell *matCellDef="let element"
                    (click)="openDialog('endorsement', dataSource)">
                    <mat-icon>{{element.action}}</mat-icon>
                  </td>
                </ng-container>


                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              </table>
            </div>
          </form>
        </mat-expansion-panel>
        <!--End Endorsement Information-->

        <!--Start Claims Information-->
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Claim Information
            </mat-panel-title>
          </mat-expansion-panel-header>
          <hr style="margin-top: 0px;" />
          <div class="row" *ngIf="_claims.length > 0; else elseBlockNoClaims;">
            <table mat-table [dataSource]="_claims" style="width: 100%;">
              <ng-container matColumnDef="claimNumber">
                <th mat-header-cell *matHeaderCellDef>Claim Number</th>
                <td mat-cell *matCellDef="let element">{{element.ClaimNumber}}</td>
              </ng-container>
              <ng-container matColumnDef="claimSubmissionDateString">
                <th mat-header-cell *matHeaderCellDef>Claim Submission Date</th>
                <td mat-cell *matCellDef="let element">{{element.ClaimSubmissionDateString}}</td>
              </ng-container>
              <ng-container matColumnDef="amountApproved">
                <th mat-header-cell *matHeaderCellDef> Claim Amount Approved </th>
                <td mat-cell *matCellDef="let element"> {{element.AmountApproved}} </td>
              </ng-container>
              <ng-container matColumnDef="claimStatus">
                <th mat-header-cell *matHeaderCellDef> Claim Status </th>
                <td mat-cell *matCellDef="let element"> {{element.ClaimStatus}} </td>
              </ng-container>
              <ng-container matColumnDef="remark">
                <th mat-header-cell *matHeaderCellDef> Claim Final Remark </th>
                <td mat-cell *matCellDef="let element"> {{element.Remark}} </td>
              </ng-container>
              <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef style="text-align: end;"> Action </th>
                <td class="handOnHover" mat-cell *matCellDef="let element">
                  <div class="row" style="justify-content: flex-end">
                    <div class="col-md-4">
                      <button type="button" mat-icon-button (click)="openClaimsDialog(element)">
                        <mat-icon>visibility</mat-icon>
                      </button>
                    </div>
                  </div>
                </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="_displayedColumnsClaims"></tr>
              <tr mat-row *matRowDef="let row; columns: _displayedColumnsClaims;"></tr>
            </table>
          </div>
          <ng-template #elseBlockNoClaims>
            <div class="alert alert-danger" role="alert">
              No Claim
            </div>
          </ng-template>

        </mat-expansion-panel>
        <!--End Claims Information-->

        <!--Start Upload Files-->
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Upload Documents
            </mat-panel-title>
          </mat-expansion-panel-header>
          <form [formGroup]="uploadDocumentForm" [ngClass]="{disabledDiv: _isViewPolicyActive}">
            <hr style="margin-top: 0px;" />
            <div class="row">
              <div class="col-lg-12">
                <h4>Upload Documents <span style="color:red; font-style: italic;">(File type should be PDF and Images
                    file and max
                    size 2 MB)</span></h4>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-4">
                <mat-form-field appearance="fill">
                  <mat-label>Document Type</mat-label>
                  <mat-select formControlName="documentType">
                    <mat-option>Select</mat-option>
                    <mat-option *ngFor="let documentType of _documentTypes" [value]="documentType">
                      {{documentType.Name}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-lg-6">
                <mat-form-field>
                  <ngx-mat-file-input placeholder="Browse" formControlName="browse" [errorStateMatcher]="matcher"
                    style="line-height: 20px;" [accept]="listAccepts">
                  </ngx-mat-file-input>
                  <!--   <ngx-doc-viewer [url]="DemoDoc" [viewer]="viewer" style="width:100%;height:100vh;"></ngx-doc-viewer>  -->
                  <mat-icon matSuffix>folder</mat-icon>
                </mat-form-field>
              </div>
              <div class="col-lg-2" *ngIf="_type != SearchPolicyType.Motor_Modify && !_isViewPolicyActive">
                <button class="btn-block" mat-raised-button style="background-color: #28a745;" color="primary"
                  (click)="openPreviewDialog()">
                  <mat-icon style="font-size: 20px;">remove_red_eye</mat-icon> Preview
                </button>
              </div>

            </div>
            <hr style="margin-top: 0px;" />
            <div class="row">
              <div class="col-lg-10">
                <mat-form-field>
                  <mat-label>Remarks</mat-label>
                  <textarea matInput cdkTextareaAutosize formControlName="remarks" #autosize="cdkTextareaAutosize"
                    cdkAutosizeMinRows="4" cdkAutosizeMaxRows="5"></textarea>
                </mat-form-field>
              </div>
              <div class="col-lg-2">
                <div class="row">
                  <div class="col-lg-12">
                    <button class="btn-block" mat-raised-button color="primary" (click)="addDocument()" [disabled]="">
                      <mat-icon>note_add</mat-icon> Add
                    </button>
                  </div>
                </div>
                <hr style="margin-top: 4px; margin-bottom: 4px;" />
                <div class="row">
                  <div class="col-lg-12">
                    <button type="reset" class="btn-block" mat-raised-button color="accent" (click)="reset()">
                      <mat-icon>refresh</mat-icon> Reset
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </form>
          <section *ngIf="_policyDocuments.length > 0; else elseBlockNoDocuments;">
            <hr>
            <div class="row">
              <div class="col-lg-12">
                <h4>Uploaded Files</h4>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-12">
                <table mat-table [dataSource]="_dataSourceUploadDocuments">
                  <ng-container matColumnDef="Sno">
                    <th mat-header-cell *matHeaderCellDef> S.No. </th>
                    <td mat-cell *matCellDef="let element;  let i = index"> <strong>{{i+1}}.</strong> </td>
                  </ng-container>
                  <ng-container matColumnDef="FileName">
                    <th mat-header-cell *matHeaderCellDef> File Name </th>
                    <td mat-cell *matCellDef="let element"> {{element.FileName}} </td>
                  </ng-container>
                  <ng-container matColumnDef="DocumentTypeName">
                    <th mat-header-cell *matHeaderCellDef> Document Type </th>
                    <td mat-cell *matCellDef="let element"> {{element.DocumentTypeName}} </td>
                  </ng-container>
                  <ng-container matColumnDef="Remarks">
                    <th mat-header-cell *matHeaderCellDef> Remarks </th>
                    <td mat-cell *matCellDef="let element"> {{element.Remarks}} </td>
                  </ng-container>
                  <ng-container matColumnDef="DocumentTypeId">
                    <th style="text-align:center;" mat-header-cell *matHeaderCellDef style="text-align: end;"> Action
                    </th>
                    <td style="text-align:center;" mat-cell *matCellDef="let element; let i = index"
                      style="width: 185px;">
                      <div class="row">
                        <div class="col-lg-1">
                          <mat-icon matTooltip="Delete" color="warn" class="handOnHover" (click)="deletefiles(i)">
                            delete_outline</mat-icon>
                        </div>
                        <div class="col-lg-1">
                          <mat-icon matTooltip="Download" class="handOnHover" (click)="downloadFile(element)">download
                          </mat-icon>
                        </div>
                      </div>
                    </td>
                  </ng-container>
                  <tr mat-header-row *matHeaderRowDef="displayedColumnsDocumentTable"></tr>
                  <tr mat-row *matRowDef="let row; columns: displayedColumnsDocumentTable;"></tr>
                </table>

              </div>
            </div>
          </section>
          <ng-template #elseBlockNoDocuments>
            <div class="alert alert-danger" role="alert">
              There is no any documents.
            </div>
          </ng-template>
        </mat-expansion-panel>
        <!--End Upload Files-->


      </mat-accordion>

      <mat-card class="mat-elevation-z2" style="margin-left:0px; margin-right: 0px;">
        <mat-card-content>
          <div class="row">
            <div class="col-lg-4">
              <mat-list>
                <mat-list-item>
                  <mat-icon mat-list-icon>person</mat-icon>
                  <div mat-line>Policy Created By</div>
                  <div mat-line *ngIf="_policyType !== SearchPolicyType.Motor_Renew"> {{_policyData?.CreatedBy}} </div>
                </mat-list-item>
                <hr class="hrClass" />
                <mat-list-item>
                  <mat-icon mat-list-icon>date_range</mat-icon>
                  <div mat-line>Policy Created On</div>
                  <div mat-line *ngIf="_policyType !== SearchPolicyType.Motor_Renew"> {{_policyData?.CreatedTime |date:
                    'dd/MM/yyyy hh:mm:a'}} </div>
                </mat-list-item>
              </mat-list>
            </div>
            <div class="col-lg-4">
              <mat-list>
                <mat-list-item>
                  <mat-icon mat-list-icon>person</mat-icon>
                  <div mat-line>QC By</div>
                  <div mat-line *ngIf="_policyType !== SearchPolicyType.Motor_Renew"> {{ _policyData?.VerifiedBy}}
                  </div>
                </mat-list-item>
                <hr class="hrClass" />
                <mat-list-item>
                  <mat-icon mat-list-icon>date_range</mat-icon>
                  <div mat-line>QC Time</div>
                  <div mat-line *ngIf="_policyType !== SearchPolicyType.Motor_Renew"> {{_policyData?.VerifiedTime |date:
                    'dd/MM/yyyy hh:mm:a'}} </div>
                </mat-list-item>
              </mat-list>
            </div>
            <div class="col-lg-4">
              <mat-list>
                <mat-list-item>
                  <mat-icon mat-list-icon>person</mat-icon>
                  <div mat-line>Last Modified By</div>
                  <div mat-line *ngIf="_policyType !== SearchPolicyType.Motor_Renew"> {{_policyData?.ModifiedBy}} </div>
                </mat-list-item>
                <hr class="hrClass" />
                <mat-list-item>
                  <mat-icon mat-list-icon>date_range</mat-icon>
                  <div mat-line>Modified On</div>
                  <div mat-line *ngIf="_policyType !== SearchPolicyType.Motor_Renew"> {{_policyData?.ModifiedTime|date:
                    'dd/MM/yyyy hh:mm:a'}} </div>
                </mat-list-item>
              </mat-list>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
      <hr />
      <div class="row">
        <div class="col-lg-4"></div>
        <div class="col-lg-2" *ngIf="_policyType != SearchPolicyType.Motor_Verify">
          <button type="reset" class="btn-block" mat-raised-button color="accent" (click)="resetForm()"
            *ngIf=!_isViewPolicyActive>
            <mat-icon style="font-size: 22px;">refresh</mat-icon> Reset
          </button>
        </div>
        <div class="col-lg-2">
          <button type="button" class="btn-block" mat-raised-button color="primary" (click)="createPolicy()"
            *ngIf="!_isViewPolicyActive">
            <mat-icon style="font-size: 22px;">save</mat-icon> {{ _policyType != SearchPolicyType.Motor_Verify? 'Save' :
            'Verify' }}
          </button>
          <button type="button" class="btn-block" mat-raised-button color="primary"
            [routerLink]="['/pms/motor/motor-policy-management']" *ngIf=_isViewPolicyActive>
            <mat-icon style="font-size: 22px;">save</mat-icon> Back
          </button>
        </div>
        <div class="col-lg-4"></div>
      </div>
    </mat-card-content>
  </mat-card>
</div>